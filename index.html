<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>calendar</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat|Ubuntu" rel="stylesheet">

  <!-- Bootstrap CDN -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/styles.css">

  <!-- FullCalendar CSS CDN -->
  <link href='https://unpkg.com/@fullcalendar/core@4.4.0/main.min.css' rel='stylesheet' />
  <link href='https://unpkg.com/@fullcalendar/daygrid@4.4.0/main.min.css' rel='stylesheet' />
  <link href='https://unpkg.com/@fullcalendar/timegrid@4.4.0/main.min.css' rel='stylesheet' />
  <link href='https://unpkg.com/@fullcalendar/list@4.4.0/main.min.css' rel='stylesheet' />

  <!-- Fontawsome CDN -->
  <script src="https://kit.fontawesome.com/afcc79929e.js" crossorigin="anonymous"></script>


</head>

<style>
  body {
    margin: 40px 10px;
    padding: 0;
    font-family: "Lucida Grande", Helvetica, Arial, Verdana, sans-serif;
    font-size: 14px;
  }

  #calendar {
    max-width: 900px;
    margin: 0 auto;
  }

  .hoverEffect {
    font-size: 29px;
    position: absolute;
    margin: 30px 55px;
    cursor: pointer;
  }

  .ui-datepicker-trigger {
    background: transparent;
    border: none;
    margin: 0 !important;
    padding: 0 !important;
  }

  .datetimepicker .input-group-addon {
    background-color: #f9f9f9;
    border-radius: 0;
    border-top-right-radius: 3px;
    border-bottom-right-radius: 3px;
    cursor: pointer;
    height: 2.1em;
    border: 1px solid #ccc;


  }

  .fc-state-default.fc-corner-right {
    border-radius: 0px;
  }
</style>

<body>

  <div id='calendar'></div>

  <!-- Bootstrap Model Dialog -->
  <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#registerModal" data-whatever="@getbootstrap">Open modal for @getbootstrap</button> -->

  <div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Đăng ký lịch thu</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form>
            <div class="form-group">
              <label for="date" class="col-form-label">Ngày</label>
              <!-- <input type="text" class="form-control" id="date"> -->
              <input type="date" class="form-control" id="date" name="" value="">
            </div>
            <div class="form-group">
              <label for="fullname" class="col-form-label">Họ và tên</label>
              <input type="text" class="form-control" id="fullname">
            </div>
            <div class="form-group">
              <label for="book" class="col-form-label">Tên sách</label>
              <input type="text" class="form-control" id="book">
            </div>
            <div class="form-group">
              <label for="author" class="col-form-label">Tác giả</label>
              <input type="text" class="form-control" id="author">
            </div>
            <div class="form-group">
              <label for="shift">Ca thu</label>
              <select class="form-control" id="shift">
                <option>Sáng: 9h - 11h30</option>
                <option>Chiều: 2h - 4h30</option>
                <option>Tối: 18h30 - 20h</option>
              </select>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
          <button type="button" class="btn btn-primary">Đăng ký</button>
        </div>
      </div>
    </div>
  </div>

  <!-- FullCalendar Script CDN -->
  <script src='https://unpkg.com/@fullcalendar/core@4.4.0/main.min.js'></script>
  <script src='https://unpkg.com/@fullcalendar/daygrid@4.4.0/main.min.js'></script>
  <script src='https://unpkg.com/@fullcalendar/timegrid@4.4.0/main.min.js'></script>
  <script src='https://unpkg.com/@fullcalendar/list@4.4.0/main.min.js'></script>

  <!-- Bootstrap Scripts -->
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  <script src='https://unpkg.com/@fullcalendar/interaction@4.4.0/main.min.js'></script>

  <script>
    let clickedDate = "";

    document.addEventListener('DOMContentLoaded', function() {
      var calendarEl = document.getElementById('calendar');

      var calendar = new FullCalendar.Calendar(calendarEl, {
        plugins: ['dayGrid', 'timeGrid', 'list', 'interaction'], // an array of strings!,

        events: [{
          title: 'All Day Event',
          start: '2020-04-04'
        }, ]
      });

      calendar.on('dateClick', function(dateClickInfo) {
        console.log('clicked on ' + dateClickInfo.dateStr);
        $('#registerModal').modal({});

        clickedDate = dateClickInfo.dateStr;

        console.log(clickedDate);
        // console.log("date = " + info.date);
      });

      calendar.render();
    });

    // Bootstrap Modal Dialog
    $('#exampleModal').on('show.bs.modal', function(event) {
      var button = $(event.relatedTarget) // Button that triggered the modal
      var recipient = button.data('whatever') // Extract info from data-* attributes
      // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
      // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
      var modal = $(this)
      modal.find('.modal-title').text('New message to ' + recipient)
      modal.find('.modal-body input').val(recipient)
    })

    // Bootstrap Modal Dialog
    $('#registerModal').on('show.bs.modal', function(event) {
      setTimeout(function() {
        var modal = $(this);
        // modal.find('#date').val(clickedDate);
        $('#date').val(clickedDate);
      }, 100);
    })
  </script>

</body>

</html>
